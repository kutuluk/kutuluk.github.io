webpackJsonp([0],{GBUi:function(t,e){"use strict";e.__esModule=!0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=function(t,e,n){this.l=t,this.c=e,this.n=n,this.p=null};r.prototype.r=function(){this.p?this.p.n=this.n:this.l.h=this.n,this.n&&(this.n.p=this.p)};var i=function(){this.h=null};i.prototype.add=function(t){var e=new r(this,t,this.h);return this.h&&(this.h.p=e),this.h=e,e},i.prototype.i=function(t){for(var e=this.h;e;)t(e.c),e=e.n};var o=function(t){this.z=t,this.o=new i,this.t=new i};o.prototype.add=function(t){t.remove(),t.layer=this,t.n=(function(t){return 1!==t.alpha||0===t.frame.atest}(t)?this.t:this.o).add(t)};var a=function t(e,r){var i=n({antialias:!1,alpha:!1,scale:1},r),a=i.alpha?1:770,s=i.scale,u=e.getContext("webgl",i),c=u.getExtension("ANGLE_instanced_arrays"),h=function(t,e){var n=u.createShader(e);return u.shaderSource(n,t),u.compileShader(n),n},f=u.createProgram();u.attachShader(f,h("attribute vec2 g;\nattribute vec2 a;\nattribute vec2 t;\nattribute float r;\nattribute vec2 s;\nattribute vec4 u;\nattribute vec4 c;\nattribute float z;\nuniform mat4 m;\nvarying vec2 v;\nvarying vec4 i;\nvoid main(){\nv=u.xy+g*u.zw;\ni=c.abgr;\nvec2 p=(g-a)*s;\nfloat q=cos(r);\nfloat w=sin(r);\np=vec2(p.x*q-p.y*w,p.x*w+p.y*q);\np+=a+t;\ngl_Position=m*vec4(p,z,1);}",35633)),u.attachShader(f,h("precision mediump float;\nuniform sampler2D x;\nuniform float j;\nvarying vec2 v;\nvarying vec4 i;\nvoid main(){\nvec4 c=texture2D(x,v);\ngl_FragColor=c*i;\nif(j>0.0){\nif(c.a<j)discard;\ngl_FragColor.a=1.0;};}",35632)),u.linkProgram(f);var l=function(t,e,n){var r=u.createBuffer();u.bindBuffer(t,r),u.bufferData(t,e,n||35044)},d=function(t,e,n,r,i,o,a){var s=u.getAttribLocation(f,t);u.enableVertexAttribArray(s),u.vertexAttribPointer(s,e,o||5126,!!a,n||0,i||0),r&&c.vertexAttribDivisorANGLE(s,r)};l(34963,new Uint8Array([0,1,2,2,1,3])),l(34962,new Float32Array([0,0,0,1,1,0,1,1])),d("g",2);var p=new ArrayBuffer(3407820),v=new Float32Array(p),y=new Uint32Array(p);l(34962,p,35048),d("a",2,52,1),d("s",2,52,1,8),d("r",1,52,1,16),d("t",2,52,1,20),d("u",4,52,1,28),d("c",4,52,1,44,5121,!0),d("z",1,52,1,48);var m,g,b,x,w,P=function(t){return u.getUniformLocation(f,t)},T=P("m"),M=P("x"),E=P("j"),_=0,A=function(){return b=e.clientHeight*s|0,(e.width!==(g=e.clientWidth*s|0)||e.height!==b)&&(e.width=g,e.height=b,!0)},z=function(){_&&(u.blendFunc(w?1:a,w?0:771),u.depthFunc(w?513:515),u.bindTexture(3553,x.tex),u.uniform1i(M,x.tex),u.uniform1f(E,w?x.atest:0),u.bufferSubData(34962,0,v.subarray(0,13*_)),c.drawElementsInstancedANGLE(4,6,5121,0,_),_=0)},I=function(t){if(t.visible){65535===_&&z();var e=t.frame,n=e.uvs,r=t.anchor||e.anchor;x.tex!==e.tex&&(x.tex&&z(),x=e);var i=13*_;v[i++]=r.x,v[i++]=r.y,v[i++]=t.scale.x*e.size.x,v[i++]=t.scale.y*e.size.y,v[i++]=t.rotation,v[i++]=t.position.x,v[i++]=t.position.y,v[i++]=n[0],v[i++]=n[1],v[i++]=n[2],v[i++]=n[3],y[i++]=((16777215&t.tint)<<8|255*t.alpha&255)>>>0,v[i++]=t.layer.z,_++}},j=new o(0),D=[j],S={gl:u,camera:{at:t.Point(),to:t.Point(),angle:0},background:function(t,e,n,r){void 0===r&&(r=1),u.clearColor(t,e,n,r)},layer:function(t){var e=D.find(function(e){return e.z===t});return e||(e=new o(t),D.push(e),D.sort(function(t,e){return e.z-t.z})),e},add:function(t){j.add(t)},resize:A,render:function(){A();var t=S.camera,e=t.at,n=t.to,r=t.angle,i=e.x-g*n.x,o=e.y-b*n.y,a=Math.cos(r),s=Math.sin(r),c=2/g,h=-2/b;m=[a*c,s*h,0,0,-s*c,a*h,0,0,0,0,-1e-5,0,(e.x*(1-a)+e.y*s)*c-2*i/g-1,(e.y*(1-a)-e.x*s)*h+2*o/b+1,0,1],u.useProgram(f),u.enable(3042),u.enable(2929),u.uniformMatrix4fv(T,!1,m),u.viewport(0,0,g,b),u.clear(16640),x={tex:null},w=!0,D.forEach(function(t){return t.o.i(function(t){return I(t)})}),z(),w=!1;for(var l=D.length-1;l>=0;l--)D[l].t.i(function(t){return I(t)});z()}};return A(),S};a.Point=function(){function t(t,e){if(!(this instanceof a.Point))return new a.Point(t,e);this.set(t,e)}return t.prototype.set=function(t,e){return this.x=t||0,this.y=e||(0!==e?this.x:0),this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t}();var s=function t(e,n,r,i){if(!(this instanceof t))return new t(e,n,r,i);this.size=a.Point().copy(r),this.anchor=a.Point().copy(i||e.anchor),this.uvs=[n.x/e.size.x,n.y/e.size.y,r.x/e.size.x,r.y/e.size.y],this.t=e},u={atest:{configurable:!0},tex:{configurable:!0}};u.atest.get=function(){return this.t.atest},u.tex.get=function(){return this.t.tex},Object.defineProperties(s.prototype,u),a.Frame=s,a.Texture=function t(e,r,i,o){if(!(this instanceof t))return new t(e,r,i,o);this.size=a.Point(r.width,r.height),this.anchor=a.Point(),this.uvs=[0,0,1,1],this.atest=i||(0===i?0:1);var s=n({10240:9728,10241:9728,10242:33071,10243:33071},o),u=e.gl;this.tex=u.createTexture(),u.bindTexture(3553,this.tex),Object.keys(s).forEach(function(t){return u.texParameteri(3553,t,s[t])}),u.texImage2D(3553,0,6408,6408,5121,r)},a.Sprite=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);n(this,{frame:e,visible:!0,position:a.Point(),rotation:0,anchor:null,scale:a.Point(1),tint:16777215,a:1},r),this.remove()}var e={alpha:{configurable:!0}};return e.alpha.get=function(){return this.a},e.alpha.set=function(t){var e=this.a;this.a=t,this.n&&(t<1&&1===e||1===t&&e<1)&&this.layer.add(this)},t.prototype.remove=function(){this.n&&this.n.r(),this.layer=null,this.n=null},Object.defineProperties(t.prototype,e),t}(),e.default=a},ZAL5:function(t){t.exports={home:"home__2Q5nZ"}},"iOg+":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0,e.default=void 0;var a=n("KM04"),s=n("GBUi"),u=r(s),c=n("ZAL5"),h=r(c),f=u.default.Point,l=u.default.Texture,d=u.default.Frame,p=u.default.Sprite,v=function(){var t=document.createElement("canvas");t.width=96,t.height=32;var e=t.getContext("2d"),n=0;e.lineWidth=2,e.fillStyle="#cccccc",e.strokeStyle="#000000",e.beginPath(),e.moveTo(n+16,16);for(var r=0;r<2*Math.PI;r+=2*Math.PI/5)e.lineTo(n+16-16*Math.sin(r)*.9,16-16*Math.cos(r)*.9);return e.closePath(),e.fill(),e.stroke(),n+=32,e.beginPath(),e.moveTo(n+3,3),e.lineTo(n+32-3,3),e.lineTo(n+32-3,29),e.lineTo(n+3,29),e.closePath(),e.fill(),e.stroke(),n+=32,e.beginPath(),e.moveTo(n+3,3),e.lineTo(n+29,3),e.lineTo(n+29,8),e.lineTo(n+8,8),e.lineTo(n+8,14),e.lineTo(n+20,14),e.lineTo(n+20,18),e.lineTo(n+8,18),e.lineTo(n+8,29),e.lineTo(n+3,29),e.closePath(),e.fill(),e.stroke(),t},y=(0,a.h)("canvas",{id:"view"});e.default=function(t){function e(){for(var e,n,r,o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=n=i(this,t.call.apply(t,[this].concat(a))),n.onmousedown=function(t){n.add=!0,t.preventDefault()},n.ontouchstart=function(t){n.add=!0,t.preventDefault()},n.onmouseup=function(t){n.add=!1,t.preventDefault()},n.ontouchend=function(t){n.add=!1,t.preventDefault()},r=e,i(n,r)}return o(e,t),e.prototype.componentDidMount=function(){var t,e=this,n=document.getElementById("view");this.add=!1;var r=1===window.devicePixelRatio?1:2,i=(0,u.default)(n,{scale:r}),o=i.gl,a=Math.min(i.gl.canvas.width,i.gl.canvas.height);i.background(1,1,1,0),i.camera.at.set(a/2,a/2),i.camera.to.set(.5);var s=l(i,v(),.5,(t={},t[o.TEXTURE_MAG_FILTER]=o.LINEAR,t[o.TEXTURE_MIN_FILTER]=o.LINEAR,t));s.anchor=f(.5);var c=d(s,f(),f(32)),h=d(s,f(32,0),f(32)),y=d(s,f(64,0),f(32)),m=[s,c,h,y],g=function(){var t=document.createElement("canvas");t.width=a,t.height=a;var e=t.getContext("2d");e.fillStyle="#ffffff",e.beginPath(),e.moveTo(a/2,a/2);for(var n=0;n<2*Math.PI;n+=2*Math.PI/5)e.lineTo(a/2-Math.sin(n)*a/2.5,a/2-Math.cos(n)*a/2.5);e.closePath(),e.fill();var r=e.getImageData(0,0,a,a),i=r.data;return function(t,e){return i[4*(e*a+t)]>0}}(),b=[],x=0,w=0,P=function(t){x%250==0&&w++,x+=t;for(var e=i.layer(w),n=0;n<t;n++){for(var r=p(m[n%m.length]),o=0,s=0;!g(o,s);)o=~~(a*Math.random()),s=~~(a*Math.random());r.position.set(o,s),r.tint=16777215*Math.random(),r.rotation=Math.random()*Math.PI*2,r.dr=.1*(.5-Math.random()),r.trans=!Math.round(Math.random()+.3),b.push(r),e.add(r)}},T=0;this.props.start(function(t){(x<3e3||e.add)&&P(25),T+=.005;var n=(Math.abs(Math.cos(T))+.1)*a/1300;return b.forEach(function(e){e.scale.set(n),e.rotation+=e.dr,e.trans&&(e.alpha>.6?e.alpha-=t/1e4:e.trans=!1)}),i.camera.angle+=t/3e3,i.render(),[{title:"sprites",value:x<1e4?x:Number((x/1e3).toFixed(1))+"k"}]})},e.prototype.render=function(){return(0,a.h)("div",{class:h.default.home,onMouseDown:this.onmousedown,onTouchStart:this.ontouchstart,onMouseUp:this.onmouseup,onTouchEnd:this.ontouchend},"Click or touch to add sprites",y)},e}(a.Component)}});
//# sourceMappingURL=route-home.chunk.3fcab.js.map