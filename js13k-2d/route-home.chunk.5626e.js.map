{"version":3,"sources":["webpack:///route-home.chunk.5626e.js","webpack:///../node_modules/js13k-2d/dist/renderer.m.js","webpack:///./routes/home/style.css","webpack:///./routes/home/index.js"],"names":["webpackJsonp","GBUi","module","exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","t","n","this","c","p","d","r","h","add","e","z","o","remove","layer","alpha","frame","atest","antialias","a","getContext","s","getExtension","u","createShader","shaderSource","compileShader","createProgram","attachShader","linkProgram","createBuffer","bindBuffer","bufferData","f","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","vertexAttribDivisorANGLE","Uint8Array","Float32Array","l","ArrayBuffer","v","Uint32Array","y","x","getUniformLocation","g","b","m","w","P","bufferSubData","subarray","drawElementsInstancedANGLE","visible","scale","position","tex","size","uvs","anchor","bindTexture","uniform1i","uniform1f","rotation","tint","A","j","F","gl","camera","at","Point","to","angle","background","clearColor","find","push","sort","render","clientWidth","clientHeight","width","height","Math","cos","sin","useProgram","uniformMatrix4fv","viewport","clear","activeTexture","disable","enable","depthFunc","forEach","blendFunc","set","copy","configurable","get","defineProperties","Frame","Texture","10240","10241","10242","10243","createTexture","keys","texParameteri","texImage2D","Sprite","default","ZAL5","home","iOg+","__webpack_require__","_interopRequireDefault","obj","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","TypeError","create","constructor","value","enumerable","writable","setPrototypeOf","__proto__","undefined","_preact","_js13k2d","_js13k2d2","_style","_style2","Renderer","atlasImg","canvas","document","createElement","ctx","offset","lineWidth","fillStyle","strokeStyle","beginPath","moveTo","PI","lineTo","closePath","fill","stroke","_ref","id","_Component","Home","_temp","_this","_ret","_len","args","Array","_key","apply","concat","onmousedown","event","preventDefault","ontouchstart","onmouseup","ontouchend","componentDidMount","_Texture","_this2","view","getElementById","scene","maskSize","min","atlas","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","bFrame","qFrame","fFrame","frames","mask","_ctx$getImageData","getImageData","data","sprs","len","cl","addSprite","sprite","random","dr","trans","round","props","start","title","Number","toFixed","class","style","onMouseDown","onTouchStart","onMouseUp","onTouchEnd","Component"],"mappings":"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","file":"route-home.chunk.5626e.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ \"GBUi\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar t = function t(_t, n) {\n  this.c = _t, this.p = null, this.n = n, this.d = 0;\n};t.prototype.r = function () {\n  this.d = 1;\n};var n = function n() {\n  this.h = null;\n};n.prototype.add = function (n) {\n  var e = new t(n, this.h);return this.h && (this.h.p = e), this.h = e, e;\n}, n.prototype.i = function (t) {\n  for (var n = this.h; n;) {\n    n.d ? (n.p ? n.p.n = n.n : this.h = n.n, n.n && (n.n.p = n.p)) : t(n.c), n = n.n;\n  }\n};var e = function e(t) {\n  this.z = t, this.o = new n(), this.t = new n();\n};e.prototype.add = function (t) {\n  t.remove(), t.layer = this, t.n = (function (t) {\n    return 1 !== t.alpha || 0 === t.frame.atest;\n  }(t) ? this.t : this.o).add(t);\n};var i = function i(t, n) {\n  var r = _extends({ antialias: !1, alpha: !1 }, n),\n      a = r.alpha ? 1 : 770,\n      o = t.getContext(\"webgl\", r),\n      s = o.getExtension(\"ANGLE_instanced_arrays\"),\n      u = function u(t, n) {\n    var e = o.createShader(n);return o.shaderSource(e, t), o.compileShader(e), e;\n  },\n      c = o.createProgram();o.attachShader(c, u(\"attribute vec2 g;\\nattribute vec2 a;\\nattribute vec2 t;\\nattribute float r;\\nattribute vec2 s;\\nattribute vec4 u;\\nattribute vec4 c;\\nattribute float z;\\nuniform mat4 m;\\nvarying vec2 v;\\nvarying vec4 i;\\nvoid main(){\\nv=u.xy+g*u.zw;\\ni=c.abgr;\\nvec2 p=(g-a)*s;\\nfloat q=cos(r);\\nfloat w=sin(r);\\np=vec2(p.x*q-p.y*w,p.x*w+p.y*q);\\np+=a+t;\\ngl_Position=m*vec4(p,z,1);}\", 35633)), o.attachShader(c, u(\"precision mediump float;\\nuniform sampler2D x;\\nuniform float j;\\nvarying vec2 v;\\nvarying vec4 i;\\nvoid main(){\\nvec4 c=texture2D(x,v);\\ngl_FragColor=c*i;\\nif(j>0.0){\\nif(c.a<j)discard;\\ngl_FragColor.a=1.0;};}\", 35632)), o.linkProgram(c);var h = function h(t, n, e) {\n    var i = o.createBuffer();return o.bindBuffer(t, i), o.bufferData(t, n, e || 35044), i;\n  },\n      f = function f(t, n, e, i, r, a, u) {\n    var h = o.getAttribLocation(c, t);return o.enableVertexAttribArray(h), o.vertexAttribPointer(h, n, a || 5126, !!u, e || 0, r || 0), i && s.vertexAttribDivisorANGLE(h, i), h;\n  };h(34963, new Uint8Array([0, 1, 2, 2, 1, 3])), h(34962, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1])), f(\"g\", 2);var l = new ArrayBuffer(3407820),\n      v = new Float32Array(l),\n      p = new Uint32Array(l);h(34962, l, 35048), f(\"a\", 2, 52, 1), f(\"s\", 2, 52, 1, 8), f(\"r\", 1, 52, 1, 16), f(\"t\", 2, 52, 1, 20), f(\"u\", 4, 52, 1, 28), f(\"c\", 4, 52, 1, 44, 5121, !0), f(\"z\", 1, 52, 1, 48);var y,\n      d,\n      x = function x(t) {\n    return o.getUniformLocation(c, t);\n  },\n      g = x(\"m\"),\n      b = x(\"x\"),\n      m = x(\"j\"),\n      w = 0,\n      P = function P() {\n    w && (o.bufferSubData(34962, 0, v.subarray(0, 13 * w)), s.drawElementsInstancedANGLE(4, 6, 5121, 0, w), w = 0);\n  },\n      z = function z(t) {\n    if (t.visible) {\n      65535 === w && P();var n = t.frame,\n          e = t.scale,\n          i = t.position,\n          r = n.tex,\n          a = n.size,\n          s = n.uvs,\n          u = t.anchor || n.anchor;y !== r && (P(), y = r, o.bindTexture(3553, r), o.uniform1i(b, r), o.uniform1f(m, d ? n.atest : 0));var c = 13 * w;v[c++] = u.x, v[c++] = u.y, v[c++] = e.x * a.x, v[c++] = e.y * a.y, v[c++] = t.rotation, v[c++] = i.x, v[c++] = i.y, v[c++] = s[0], v[c++] = s[1], v[c++] = s[2], v[c++] = s[3], p[c++] = ((16777215 & t.tint) << 8 | 255 * t.alpha & 255) >>> 0, v[c++] = t.layer.z, w++;\n    }\n  },\n      A = new e(0),\n      j = [A],\n      F = { gl: o, camera: { at: i.Point(), to: i.Point(), angle: 0 }, background: function background(t, n, e, i) {\n      void 0 === i && (i = 1), o.clearColor(t, n, e, i);\n    }, layer: function layer(t) {\n      var n = j.find(function (n) {\n        return n.z === t;\n      });return n || (n = new e(t), j.push(n), j.sort(function (t, n) {\n        return n.z - t.z;\n      })), n;\n    }, add: function add(t) {\n      A.add(t);\n    }, render: function render() {\n      var n = t.clientWidth,\n          e = t.clientHeight;t.width = n, t.height = e;var i = F.camera,\n          r = i.at,\n          s = i.to,\n          u = i.angle,\n          h = r.x - n * s.x,\n          f = r.y - e * s.y,\n          l = Math.cos(u),\n          v = Math.sin(u),\n          p = 2 / n,\n          x = -2 / e,\n          b = [l * p, v * x, 0, 0, -v * p, l * x, 0, 0, 0, 0, -1e-5, 0, (r.x * (1 - l) + r.y * v) * p - 2 * h / n - 1, (r.y * (1 - l) - r.x * v) * x + 2 * f / e + 1, 0, 1];o.useProgram(c), o.uniformMatrix4fv(g, !1, b), o.viewport(0, 0, n, e), o.clear(16640), o.activeTexture(33984), y = null, o.disable(3042), o.enable(2929), o.depthFunc(513), d = !0, j.forEach(function (t) {\n        return t.o.i(function (t) {\n          return z(t);\n        });\n      }), P(), o.enable(3042), o.blendFunc(a, 771), o.depthFunc(515), o.uniform1f(m, 0), d = !1;for (var w = j.length - 1; w >= 0; w--) {\n        j[w].t.i(function (t) {\n          return z(t);\n        });\n      }P();\n    } };return F.render(), F;\n};i.Point = function () {\n  function t(t, n) {\n    if (!(this instanceof i.Point)) return new i.Point(t, n);this.set(t, n);\n  }return t.prototype.set = function (t, n) {\n    return this.x = t || 0, this.y = n || (0 !== n ? this.x : 0), this;\n  }, t.prototype.copy = function (t) {\n    return this.x = t.x, this.y = t.y, this;\n  }, t;\n}();var r = function t(n, e, r, a) {\n  if (!(this instanceof t)) return new t(n, e, r, a);this.size = i.Point().copy(r), this.anchor = i.Point().copy(a || n.anchor), this.uvs = [e.x / n.size.x, e.y / n.size.y, r.x / n.size.x, r.y / n.size.y], this.t = n;\n},\n    a = { atest: { configurable: !0 }, tex: { configurable: !0 } };a.atest.get = function () {\n  return this.t.atest;\n}, a.tex.get = function () {\n  return this.t.tex;\n}, Object.defineProperties(r.prototype, a);i.Frame = r, i.Texture = function t(n, e, r, a) {\n  if (!(this instanceof t)) return new t(n, e, r, a);this.size = i.Point(e.width, e.height), this.anchor = i.Point(), this.uvs = [0, 0, 1, 1], this.atest = r || (0 === r ? 0 : 1);var o = _extends({ 10240: 9728, 10241: 9728, 10242: 33071, 10243: 33071 }, a),\n      s = n.gl;this.tex = s.createTexture(), s.bindTexture(3553, this.tex), Object.keys(o).forEach(function (t) {\n    return s.texParameteri(3553, t, o[t]);\n  }), s.texImage2D(3553, 0, 6408, 6408, 5121, e);\n}, i.Sprite = function () {\n  function t(n, e) {\n    if (!(this instanceof t)) return new t(n, e);this.frame = n, this.a = 1, _extends(this, { visible: !0, position: i.Point(), rotation: 0, anchor: null, scale: i.Point(1), tint: 16777215 }, e), this.remove();\n  }var n = { alpha: { configurable: !0 } };return n.alpha.get = function () {\n    return this.a;\n  }, n.alpha.set = function (t) {\n    var n = this.a;this.a = t, this.n && (t < 1 && 1 === n || 1 === t && n < 1) && this.layer.add(this);\n  }, t.prototype.remove = function () {\n    this.n && this.n.r(), this.layer = null, this.n = null;\n  }, Object.defineProperties(t.prototype, n), t;\n}();exports.default = i;\n\n/***/ }),\n\n/***/ \"ZAL5\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"home\":\"home__2Q5nZ\"};\n\n/***/ }),\n\n/***/ \"iOg+\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.default = undefined;\n\nvar _preact = __webpack_require__(\"KM04\");\n\nvar _js13k2d = __webpack_require__(\"GBUi\");\n\nvar _js13k2d2 = _interopRequireDefault(_js13k2d);\n\nvar _style = __webpack_require__(\"ZAL5\");\n\nvar _style2 = _interopRequireDefault(_style);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint-disable new-cap */\n\n\nvar Point = _js13k2d2.default.Point,\n    Texture = _js13k2d2.default.Texture,\n    Frame = _js13k2d2.default.Frame,\n    Sprite = _js13k2d2.default.Sprite;\n\n/*\nconst sprites = document.getElementById('info');\n\nconst dbgRenderInfo = gl.getExtension('WEBGL_debug_renderer_info');\nconst info = gl.getParameter(\n    dbgRenderInfo ? dbgRenderInfo.UNMASKED_RENDERER_WEBGL : gl.VENDOR\n);\n*/\n\nvar atlasImg = function atlasImg() {\n    var canvas = document.createElement('canvas');\n    var size = 32;\n    var half = size / 2;\n    canvas.width = 96;\n    canvas.height = 32;\n    var ctx = canvas.getContext('2d');\n\n    var offset = 0;\n\n    ctx.lineWidth = size / 16;\n    ctx.fillStyle = '#cccccc';\n    ctx.strokeStyle = '#000000';\n    ctx.beginPath();\n\n    ctx.moveTo(offset + half, half);\n    for (var angle = 0; angle < Math.PI * 2; angle += Math.PI * 2 / 5) {\n        ctx.lineTo(offset + half - Math.sin(angle) * half * 0.9, half - Math.cos(angle) * half * 0.9);\n    }\n\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n\n    offset += size;\n\n    ctx.beginPath();\n\n    ctx.moveTo(offset + 3, 3);\n    ctx.lineTo(offset + size - 3, 3);\n    ctx.lineTo(offset + size - 3, size - 3);\n    ctx.lineTo(offset + 3, size - 3);\n\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n\n    offset += size;\n\n    ctx.beginPath();\n\n    ctx.moveTo(offset + 3, 3);\n    ctx.lineTo(offset + 29, 3);\n    ctx.lineTo(offset + 29, 8);\n    ctx.lineTo(offset + 8, 8);\n    ctx.lineTo(offset + 8, 14);\n    ctx.lineTo(offset + 20, 14);\n    ctx.lineTo(offset + 20, 18);\n    ctx.lineTo(offset + 8, 18);\n    ctx.lineTo(offset + 8, 29);\n    ctx.lineTo(offset + 3, 29);\n\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n\n    return canvas;\n};\n\nvar _ref = (0, _preact.h)('canvas', { id: 'view' });\n\nvar Home = function (_Component) {\n    _inherits(Home, _Component);\n\n    function Home() {\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, Home);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.onmousedown = function (event) {\n            _this.add = true;\n            event.preventDefault();\n        }, _this.ontouchstart = function (event) {\n            _this.add = true;\n            event.preventDefault();\n        }, _this.onmouseup = function (event) {\n            _this.add = false;\n            event.preventDefault();\n        }, _this.ontouchend = function (event) {\n            _this.add = false;\n            event.preventDefault();\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    Home.prototype.componentDidMount = function componentDidMount() {\n        var _Texture,\n            _this2 = this;\n\n        var view = document.getElementById('view');\n\n        this.add = false;\n\n        /*\n        let add = false;\n        view.onmousedown = event => {\n            event.preventDefault();\n            add = true;\n        };\n        view.ontouchstart = event => {\n            add = true;\n            event.preventDefault();\n        };\n        view.onmouseup = event => {\n            add = false;\n            event.preventDefault();\n        };\n        view.ontouchend = event => {\n            add = false;\n            event.preventDefault();\n        };\n        */\n\n        var scene = (0, _js13k2d2.default)(view);\n        var gl = scene.gl;\n\n\n        var maskSize = Math.min(scene.gl.canvas.width, scene.gl.canvas.height);\n\n        scene.background(1, 1, 1, 0);\n        scene.camera.at.set(maskSize / 2, maskSize / 2);\n        scene.camera.to.set(0.5);\n\n        var logoMask = function logoMask() {\n            var canvas = document.createElement('canvas');\n            canvas.width = maskSize;\n            canvas.height = maskSize;\n            var ctx = canvas.getContext('2d');\n\n            ctx.fillStyle = '#ffffff';\n            ctx.beginPath();\n\n            ctx.moveTo(maskSize / 2, maskSize / 2);\n            for (var angle = 0; angle < Math.PI * 2; angle += Math.PI * 2 / 5) {\n                ctx.lineTo(maskSize / 2 - Math.sin(angle) * maskSize / 2.5, maskSize / 2 - Math.cos(angle) * maskSize / 2.5);\n            }\n\n            ctx.closePath();\n            ctx.fill();\n\n            var _ctx$getImageData = ctx.getImageData(0, 0, maskSize, maskSize),\n                data = _ctx$getImageData.data;\n\n            return function (x, y) {\n                return data[(y * maskSize + x) * 4] > 0;\n            };\n        };\n\n        /*\n        const logo = () => {\n            const canvas = document.createElement('canvas');\n            canvas.width = 64;\n            canvas.height = 64;\n            const ctx = canvas.getContext('2d');\n             ctx.lineWidth = 0;\n            ctx.strokeStyle = '#3066a9';\n            ctx.fillStyle = '#3066a9';\n            ctx.beginPath();\n             ctx.moveTo(32, 32);\n            for (\n                let angle = 0;\n                angle < Math.PI * 2;\n                angle += (Math.PI * 2) / 5\n            ) {\n                ctx.lineTo(\n                    32 - Math.sin(angle) * 30,\n                    32 - Math.cos(angle) * 30\n                );\n            }\n             ctx.closePath();\n            ctx.stroke();\n            ctx.fill();\n             const image = new Image();\n            image.src = canvas.toDataURL('image/png');\n            document.body.appendChild(image);\n        };\n         logo();\n        */\n\n        var atlas = Texture(scene, atlasImg(), 0.5, (_Texture = {}, _Texture[gl.TEXTURE_MAG_FILTER] = gl.LINEAR, _Texture[gl.TEXTURE_MIN_FILTER] = gl.LINEAR, _Texture));\n        atlas.anchor = Point(0.5);\n\n        var bFrame = Frame(atlas, Point(), Point(32));\n        var qFrame = Frame(atlas, Point(32, 0), Point(32));\n        var fFrame = Frame(atlas, Point(64, 0), Point(32));\n        var frames = [atlas, bFrame, qFrame, fFrame];\n\n        var mask = logoMask();\n        var sprs = [];\n\n        var len = 0;\n        var cl = 0;\n\n        var addSprite = function addSprite(a) {\n            if (len % 250 === 0) {\n                cl++;\n            }\n            len += a;\n\n            var layer = scene.layer(cl);\n\n            for (var i = 0; i < a; i++) {\n                var sprite = Sprite(frames[i % 4]);\n\n                var x = 0;\n                var y = 0;\n\n                while (!mask(x, y)) {\n                    x = ~~(maskSize * Math.random());\n                    y = ~~(maskSize * Math.random());\n                }\n\n                sprite.position.set(x, y);\n                sprite.scale.set(maskSize / 1200);\n                sprite.tint = Math.random() * 0xffffff;\n                sprite.rotation = Math.random() * Math.PI * 2;\n                sprite.dr = (0.5 - Math.random()) * 0.1;\n                sprite.trans = !Math.round(Math.random());\n                // sprite.trans = false;\n                sprs.push(sprite);\n                layer.add(sprite);\n            }\n        };\n\n        var loop = function loop() {\n            if (len < 3000 || _this2.add) addSprite(25);\n\n            // sprites.innerHTML = `Renderer: ${info}</br>Sprites: ${len} (click to add)`;\n\n            sprs.forEach(function (sprite) {\n                sprite.dr && (sprite.rotation += sprite.dr);\n                if (sprite.trans) {\n                    if (sprite.alpha > 0.8) {\n                        sprite.alpha -= 0.001;\n                    } else {\n                        sprite.trans = false;\n                    }\n                }\n            });\n\n            scene.camera.angle += 0.005;\n\n            scene.render();\n\n            return [{\n                title: 'sprites',\n                value: len < 10000 ? len : Number((len / 1000).toFixed(1)) + 'k'\n            }];\n        };\n\n        this.props.start(loop);\n    };\n\n    /*\n                <h1>Home</h1>\n                <p>This is the Home component.</p>\n    */\n\n    Home.prototype.render = function render() {\n        return (0, _preact.h)(\n            'div',\n            {\n                'class': _style2.default.home,\n                onMouseDown: this.onmousedown,\n                onTouchStart: this.ontouchstart,\n                onMouseUp: this.onmouseup,\n                onTouchEnd: this.ontouchend\n            },\n            'Click or touch to add sprites',\n            _ref\n        );\n    };\n\n    return Home;\n}(_preact.Component);\n\nexports.default = Home;\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-home.chunk.5626e.js","var t=function(t,n){this.c=t,this.p=null,this.n=n,this.d=0};t.prototype.r=function(){this.d=1};var n=function(){this.h=null};n.prototype.add=function(n){var e=new t(n,this.h);return this.h&&(this.h.p=e),this.h=e,e},n.prototype.i=function(t){for(var n=this.h;n;)n.d?(n.p?n.p.n=n.n:this.h=n.n,n.n&&(n.n.p=n.p)):t(n.c),n=n.n};var e=function(t){this.z=t,this.o=new n,this.t=new n};e.prototype.add=function(t){t.remove(),t.layer=this,t.n=(function(t){return 1!==t.alpha||0===t.frame.atest}(t)?this.t:this.o).add(t)};var i=function(t,n){var r=Object.assign({antialias:!1,alpha:!1},n),a=r.alpha?1:770,o=t.getContext(\"webgl\",r),s=o.getExtension(\"ANGLE_instanced_arrays\"),u=function(t,n){var e=o.createShader(n);return o.shaderSource(e,t),o.compileShader(e),e},c=o.createProgram();o.attachShader(c,u(\"attribute vec2 g;\\nattribute vec2 a;\\nattribute vec2 t;\\nattribute float r;\\nattribute vec2 s;\\nattribute vec4 u;\\nattribute vec4 c;\\nattribute float z;\\nuniform mat4 m;\\nvarying vec2 v;\\nvarying vec4 i;\\nvoid main(){\\nv=u.xy+g*u.zw;\\ni=c.abgr;\\nvec2 p=(g-a)*s;\\nfloat q=cos(r);\\nfloat w=sin(r);\\np=vec2(p.x*q-p.y*w,p.x*w+p.y*q);\\np+=a+t;\\ngl_Position=m*vec4(p,z,1);}\",35633)),o.attachShader(c,u(\"precision mediump float;\\nuniform sampler2D x;\\nuniform float j;\\nvarying vec2 v;\\nvarying vec4 i;\\nvoid main(){\\nvec4 c=texture2D(x,v);\\ngl_FragColor=c*i;\\nif(j>0.0){\\nif(c.a<j)discard;\\ngl_FragColor.a=1.0;};}\",35632)),o.linkProgram(c);var h=function(t,n,e){var i=o.createBuffer();return o.bindBuffer(t,i),o.bufferData(t,n,e||35044),i},f=function(t,n,e,i,r,a,u){var h=o.getAttribLocation(c,t);return o.enableVertexAttribArray(h),o.vertexAttribPointer(h,n,a||5126,!!u,e||0,r||0),i&&s.vertexAttribDivisorANGLE(h,i),h};h(34963,new Uint8Array([0,1,2,2,1,3])),h(34962,new Float32Array([0,0,0,1,1,0,1,1])),f(\"g\",2);var l=new ArrayBuffer(3407820),v=new Float32Array(l),p=new Uint32Array(l);h(34962,l,35048),f(\"a\",2,52,1),f(\"s\",2,52,1,8),f(\"r\",1,52,1,16),f(\"t\",2,52,1,20),f(\"u\",4,52,1,28),f(\"c\",4,52,1,44,5121,!0),f(\"z\",1,52,1,48);var y,d,x=function(t){return o.getUniformLocation(c,t)},g=x(\"m\"),b=x(\"x\"),m=x(\"j\"),w=0,P=function(){w&&(o.bufferSubData(34962,0,v.subarray(0,13*w)),s.drawElementsInstancedANGLE(4,6,5121,0,w),w=0)},z=function(t){if(t.visible){65535===w&&P();var n=t.frame,e=t.scale,i=t.position,r=n.tex,a=n.size,s=n.uvs,u=t.anchor||n.anchor;y!==r&&(P(),y=r,o.bindTexture(3553,r),o.uniform1i(b,r),o.uniform1f(m,d?n.atest:0));var c=13*w;v[c++]=u.x,v[c++]=u.y,v[c++]=e.x*a.x,v[c++]=e.y*a.y,v[c++]=t.rotation,v[c++]=i.x,v[c++]=i.y,v[c++]=s[0],v[c++]=s[1],v[c++]=s[2],v[c++]=s[3],p[c++]=((16777215&t.tint)<<8|255*t.alpha&255)>>>0,v[c++]=t.layer.z,w++}},A=new e(0),j=[A],F={gl:o,camera:{at:i.Point(),to:i.Point(),angle:0},background:function(t,n,e,i){void 0===i&&(i=1),o.clearColor(t,n,e,i)},layer:function(t){var n=j.find(function(n){return n.z===t});return n||(n=new e(t),j.push(n),j.sort(function(t,n){return n.z-t.z})),n},add:function(t){A.add(t)},render:function(){var n=t.clientWidth,e=t.clientHeight;t.width=n,t.height=e;var i=F.camera,r=i.at,s=i.to,u=i.angle,h=r.x-n*s.x,f=r.y-e*s.y,l=Math.cos(u),v=Math.sin(u),p=2/n,x=-2/e,b=[l*p,v*x,0,0,-v*p,l*x,0,0,0,0,-1e-5,0,(r.x*(1-l)+r.y*v)*p-2*h/n-1,(r.y*(1-l)-r.x*v)*x+2*f/e+1,0,1];o.useProgram(c),o.uniformMatrix4fv(g,!1,b),o.viewport(0,0,n,e),o.clear(16640),o.activeTexture(33984),y=null,o.disable(3042),o.enable(2929),o.depthFunc(513),d=!0,j.forEach(function(t){return t.o.i(function(t){return z(t)})}),P(),o.enable(3042),o.blendFunc(a,771),o.depthFunc(515),o.uniform1f(m,0),d=!1;for(var w=j.length-1;w>=0;w--)j[w].t.i(function(t){return z(t)});P()}};return F.render(),F};i.Point=function(){function t(t,n){if(!(this instanceof i.Point))return new i.Point(t,n);this.set(t,n)}return t.prototype.set=function(t,n){return this.x=t||0,this.y=n||(0!==n?this.x:0),this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t}();var r=function t(n,e,r,a){if(!(this instanceof t))return new t(n,e,r,a);this.size=i.Point().copy(r),this.anchor=i.Point().copy(a||n.anchor),this.uvs=[e.x/n.size.x,e.y/n.size.y,r.x/n.size.x,r.y/n.size.y],this.t=n},a={atest:{configurable:!0},tex:{configurable:!0}};a.atest.get=function(){return this.t.atest},a.tex.get=function(){return this.t.tex},Object.defineProperties(r.prototype,a);i.Frame=r,i.Texture=function t(n,e,r,a){if(!(this instanceof t))return new t(n,e,r,a);this.size=i.Point(e.width,e.height),this.anchor=i.Point(),this.uvs=[0,0,1,1],this.atest=r||(0===r?0:1);var o=Object.assign({10240:9728,10241:9728,10242:33071,10243:33071},a),s=n.gl;this.tex=s.createTexture(),s.bindTexture(3553,this.tex),Object.keys(o).forEach(function(t){return s.texParameteri(3553,t,o[t])}),s.texImage2D(3553,0,6408,6408,5121,e)},i.Sprite=function(){function t(n,e){if(!(this instanceof t))return new t(n,e);this.frame=n,this.a=1,Object.assign(this,{visible:!0,position:i.Point(),rotation:0,anchor:null,scale:i.Point(1),tint:16777215},e),this.remove()}var n={alpha:{configurable:!0}};return n.alpha.get=function(){return this.a},n.alpha.set=function(t){var n=this.a;this.a=t,this.n&&(t<1&&1===n||1===t&&n<1)&&this.layer.add(this)},t.prototype.remove=function(){this.n&&this.n.r(),this.layer=null,this.n=null},Object.defineProperties(t.prototype,n),t}();export default i;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/js13k-2d/dist/renderer.m.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"home\":\"home__2Q5nZ\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/home/style.css\n// module id = ZAL5\n// module chunks = 0","/* eslint-disable new-cap */\nimport { h, Component } from 'preact';\nimport Renderer from 'js13k-2d';\nimport style from './style';\n\nconst { Point, Texture, Frame, Sprite } = Renderer;\n\n/*\nconst sprites = document.getElementById('info');\n\nconst dbgRenderInfo = gl.getExtension('WEBGL_debug_renderer_info');\nconst info = gl.getParameter(\n    dbgRenderInfo ? dbgRenderInfo.UNMASKED_RENDERER_WEBGL : gl.VENDOR\n);\n*/\n\nconst atlasImg = () => {\n    const canvas = document.createElement('canvas');\n    const size = 32;\n    const half = size / 2;\n    canvas.width = 96;\n    canvas.height = 32;\n    const ctx = canvas.getContext('2d');\n\n    let offset = 0;\n\n    ctx.lineWidth = size / 16;\n    ctx.fillStyle = '#cccccc';\n    ctx.strokeStyle = '#000000';\n    ctx.beginPath();\n\n    ctx.moveTo(offset + half, half);\n    for (let angle = 0; angle < Math.PI * 2; angle += (Math.PI * 2) / 5) {\n        ctx.lineTo(\n            offset + half - Math.sin(angle) * half * 0.9,\n            half - Math.cos(angle) * half * 0.9\n        );\n    }\n\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n\n    offset += size;\n\n    ctx.beginPath();\n\n    ctx.moveTo(offset + 3, 3);\n    ctx.lineTo(offset + size - 3, 3);\n    ctx.lineTo(offset + size - 3, size - 3);\n    ctx.lineTo(offset + 3, size - 3);\n\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n\n    offset += size;\n\n    ctx.beginPath();\n\n    ctx.moveTo(offset + 3, 3);\n    ctx.lineTo(offset + 29, 3);\n    ctx.lineTo(offset + 29, 8);\n    ctx.lineTo(offset + 8, 8);\n    ctx.lineTo(offset + 8, 14);\n    ctx.lineTo(offset + 20, 14);\n    ctx.lineTo(offset + 20, 18);\n    ctx.lineTo(offset + 8, 18);\n    ctx.lineTo(offset + 8, 29);\n    ctx.lineTo(offset + 3, 29);\n\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n\n    return canvas;\n};\n\nexport default class Home extends Component {\n    onmousedown = event => {\n        this.add = true;\n        event.preventDefault();\n    };\n\n    ontouchstart = event => {\n        this.add = true;\n        event.preventDefault();\n    };\n\n    onmouseup = event => {\n        this.add = false;\n        event.preventDefault();\n    };\n\n    ontouchend = event => {\n        this.add = false;\n        event.preventDefault();\n    };\n\n    componentDidMount() {\n        const view = document.getElementById('view');\n\n        this.add = false;\n\n        /*\n        let add = false;\n        view.onmousedown = event => {\n            event.preventDefault();\n            add = true;\n        };\n        view.ontouchstart = event => {\n            add = true;\n            event.preventDefault();\n        };\n        view.onmouseup = event => {\n            add = false;\n            event.preventDefault();\n        };\n        view.ontouchend = event => {\n            add = false;\n            event.preventDefault();\n        };\n        */\n\n        const scene = Renderer(view);\n        const { gl } = scene;\n\n        const maskSize = Math.min(\n            scene.gl.canvas.width,\n            scene.gl.canvas.height\n        );\n\n        scene.background(1, 1, 1, 0);\n        scene.camera.at.set(maskSize / 2, maskSize / 2);\n        scene.camera.to.set(0.5);\n\n        const logoMask = () => {\n            const canvas = document.createElement('canvas');\n            canvas.width = maskSize;\n            canvas.height = maskSize;\n            const ctx = canvas.getContext('2d');\n\n            ctx.fillStyle = '#ffffff';\n            ctx.beginPath();\n\n            ctx.moveTo(maskSize / 2, maskSize / 2);\n            for (\n                let angle = 0;\n                angle < Math.PI * 2;\n                angle += (Math.PI * 2) / 5\n            ) {\n                ctx.lineTo(\n                    maskSize / 2 - (Math.sin(angle) * maskSize) / 2.5,\n                    maskSize / 2 - (Math.cos(angle) * maskSize) / 2.5\n                );\n            }\n\n            ctx.closePath();\n            ctx.fill();\n\n            const { data } = ctx.getImageData(0, 0, maskSize, maskSize);\n\n            return (x, y) => data[(y * maskSize + x) * 4] > 0;\n        };\n\n        /*\n        const logo = () => {\n            const canvas = document.createElement('canvas');\n            canvas.width = 64;\n            canvas.height = 64;\n            const ctx = canvas.getContext('2d');\n\n            ctx.lineWidth = 0;\n            ctx.strokeStyle = '#3066a9';\n            ctx.fillStyle = '#3066a9';\n            ctx.beginPath();\n\n            ctx.moveTo(32, 32);\n            for (\n                let angle = 0;\n                angle < Math.PI * 2;\n                angle += (Math.PI * 2) / 5\n            ) {\n                ctx.lineTo(\n                    32 - Math.sin(angle) * 30,\n                    32 - Math.cos(angle) * 30\n                );\n            }\n\n            ctx.closePath();\n            ctx.stroke();\n            ctx.fill();\n\n            const image = new Image();\n            image.src = canvas.toDataURL('image/png');\n            document.body.appendChild(image);\n        };\n\n        logo();\n        */\n\n        const atlas = Texture(scene, atlasImg(), 0.5, {\n            [gl.TEXTURE_MAG_FILTER]: gl.LINEAR,\n            [gl.TEXTURE_MIN_FILTER]: gl.LINEAR,\n        });\n        atlas.anchor = Point(0.5);\n\n        const bFrame = Frame(atlas, Point(), Point(32));\n        const qFrame = Frame(atlas, Point(32, 0), Point(32));\n        const fFrame = Frame(atlas, Point(64, 0), Point(32));\n        const frames = [atlas, bFrame, qFrame, fFrame];\n\n        const mask = logoMask();\n        const sprs = [];\n\n        let len = 0;\n        let cl = 0;\n\n        const addSprite = a => {\n            if (len % 250 === 0) {\n                cl++;\n            }\n            len += a;\n\n            const layer = scene.layer(cl);\n\n            for (let i = 0; i < a; i++) {\n                const sprite = Sprite(frames[i % 4]);\n\n                let x = 0;\n                let y = 0;\n\n                while (!mask(x, y)) {\n                    x = ~~(maskSize * Math.random());\n                    y = ~~(maskSize * Math.random());\n                }\n\n                sprite.position.set(x, y);\n                sprite.scale.set(maskSize / 1200);\n                sprite.tint = Math.random() * 0xffffff;\n                sprite.rotation = Math.random() * Math.PI * 2;\n                sprite.dr = (0.5 - Math.random()) * 0.1;\n                sprite.trans = !Math.round(Math.random());\n                // sprite.trans = false;\n                sprs.push(sprite);\n                layer.add(sprite);\n            }\n        };\n\n        const loop = () => {\n            if (len < 3000 || this.add) addSprite(25);\n\n            // sprites.innerHTML = `Renderer: ${info}</br>Sprites: ${len} (click to add)`;\n\n            sprs.forEach(sprite => {\n                sprite.dr && (sprite.rotation += sprite.dr);\n                if (sprite.trans) {\n                    if (sprite.alpha > 0.8) {\n                        sprite.alpha -= 0.001;\n                    } else {\n                        sprite.trans = false;\n                    }\n                }\n            });\n\n            scene.camera.angle += 0.005;\n\n            scene.render();\n\n            return [\n                {\n                    title: 'sprites',\n                    value:\n                        len < 10000\n                            ? len\n                            : `${Number((len / 1000).toFixed(1))}k`,\n                },\n            ];\n        };\n\n        this.props.start(loop);\n    }\n\n    /*\n                <h1>Home</h1>\n                <p>This is the Home component.</p>\n    */\n\n    render() {\n        return (\n            <div\n                class={style.home}\n                onMouseDown={this.onmousedown}\n                onTouchStart={this.ontouchstart}\n                onMouseUp={this.onmouseup}\n                onTouchEnd={this.ontouchend}\n            >\n                Click or touch to add sprites\n                <canvas id=\"view\" />\n            </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./routes/home/index.js"],"sourceRoot":""}