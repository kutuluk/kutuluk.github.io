{"version":3,"sources":["webpack:///route-bunnymark.chunk.b8af6.js","webpack:///../node_modules/js13k-2d/dist/renderer.m.js","webpack:///./routes/bunnymark/index.js","webpack:///./routes/bunnymark/style.css"],"names":["webpackJsonp","GBUi","module","exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","t","n","e","this","l","c","p","r","h","add","z","o","remove","layer","alpha","frame","atest","antialias","scale","a","s","getContext","getExtension","u","createShader","shaderSource","compileShader","createProgram","attachShader","linkProgram","f","createBuffer","bindBuffer","bufferData","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","vertexAttribDivisorANGLE","Uint8Array","Float32Array","v","ArrayBuffer","y","Uint32Array","x","g","d","b","m","w","getUniformLocation","P","A","j","E","clientHeight","width","clientWidth","height","F","blendFunc","depthFunc","bindTexture","tex","uniform1i","uniform1f","bufferSubData","subarray","drawElementsInstancedANGLE","S","visible","uvs","anchor","size","rotation","position","tint","D","O","L","gl","camera","at","Point","to","angle","background","clearColor","find","push","sort","resize","render","Math","cos","sin","useProgram","enable","uniformMatrix4fv","viewport","clear","forEach","set","copy","configurable","get","defineProperties","Frame","Texture","10240","10241","10242","10243","createTexture","keys","texParameteri","texImage2D","Sprite","default","WUy4","__webpack_require__","_interopRequireDefault","obj","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","TypeError","create","constructor","value","enumerable","writable","setPrototypeOf","__proto__","undefined","_preact","_js13k2d","_js13k2d2","_style","_style2","Renderer","random","atlasImg","canvas","document","createElement","ctx","lineWidth","fillStyle","strokeStyle","beginPath","moveTo","offset","PI","lineTo","closePath","fill","stroke","Bunny","_Sprite","props","_this","gravity","speedX","speedY","update","bounds","right","left","bottom","top","_ref","id","_Component","Bunnymark","_temp","_this2","_ret","_len","args","Array","_key","apply","concat","onmousedown","event","preventDefault","ontouchstart","onmouseup","ontouchend","componentDidMount","_Texture","_this3","view","getElementById","window","devicePixelRatio","scene","atlas","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","frames","len","cl","sprs","addSprite","sprite","start","title","Number","toFixed","class","style","home","onMouseDown","onTouchStart","onMouseUp","onTouchEnd","Component","a39o"],"mappings":"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","file":"route-bunnymark.chunk.b8af6.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"GBUi\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar t = function t(_t, n, e) {\n  this.l = _t, this.c = n, this.n = e, this.p = null;\n};t.prototype.r = function () {\n  this.p ? this.p.n = this.n : this.l.h = this.n, this.n && (this.n.p = this.p);\n};var n = function n() {\n  this.h = null;\n};n.prototype.add = function (n) {\n  var e = new t(this, n, this.h);return this.h && (this.h.p = e), this.h = e, e;\n}, n.prototype.i = function (t) {\n  for (var n = this.h; n;) {\n    t(n.c), n = n.n;\n  }\n};var e = function e(t) {\n  this.z = t, this.o = new n(), this.t = new n();\n};e.prototype.add = function (t) {\n  t.remove(), t.layer = this, t.n = (function (t) {\n    return 1 !== t.alpha || 0 === t.frame.atest;\n  }(t) ? this.t : this.o).add(t);\n};var i = function i(t, n) {\n  var r = _extends({ antialias: !1, alpha: !1, scale: 1 }, n),\n      a = r.alpha ? 1 : 770,\n      o = r.scale,\n      s = t.getContext(\"webgl\", r),\n      c = s.getExtension(\"ANGLE_instanced_arrays\"),\n      u = function u(t, n) {\n    var e = s.createShader(n);return s.shaderSource(e, t), s.compileShader(e), e;\n  },\n      h = s.createProgram();s.attachShader(h, u(\"attribute vec2 g;\\nattribute vec2 a;\\nattribute vec2 t;\\nattribute float r;\\nattribute vec2 s;\\nattribute vec4 u;\\nattribute vec4 c;\\nattribute float z;\\nuniform mat4 m;\\nvarying vec2 v;\\nvarying vec4 i;\\nvoid main(){\\nv=u.xy+g*u.zw;\\ni=c.abgr;\\nvec2 p=(g-a)*s;\\nfloat q=cos(r);\\nfloat w=sin(r);\\np=vec2(p.x*q-p.y*w,p.x*w+p.y*q);\\np+=a+t;\\ngl_Position=m*vec4(p,z,1);}\", 35633)), s.attachShader(h, u(\"precision mediump float;\\nuniform sampler2D x;\\nuniform float j;\\nvarying vec2 v;\\nvarying vec4 i;\\nvoid main(){\\nvec4 c=texture2D(x,v);\\ngl_FragColor=c*i;\\nif(j>0.0){\\nif(c.a<j)discard;\\ngl_FragColor.a=1.0;};}\", 35632)), s.linkProgram(h);var f = function f(t, n, e) {\n    var i = s.createBuffer();s.bindBuffer(t, i), s.bufferData(t, n, e || 35044);\n  },\n      l = function l(t, n, e, i, r, a, o) {\n    var u = s.getAttribLocation(h, t);s.enableVertexAttribArray(u), s.vertexAttribPointer(u, n, a || 5126, !!o, e || 0, r || 0), i && c.vertexAttribDivisorANGLE(u, i);\n  };f(34963, new Uint8Array([0, 1, 2, 2, 1, 3])), f(34962, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1])), l(\"g\", 2);var v = new ArrayBuffer(3407820),\n      p = new Float32Array(v),\n      y = new Uint32Array(v);f(34962, v, 35048), l(\"a\", 2, 52, 1), l(\"s\", 2, 52, 1, 8), l(\"r\", 1, 52, 1, 16), l(\"t\", 2, 52, 1, 20), l(\"u\", 4, 52, 1, 28), l(\"c\", 4, 52, 1, 44, 5121, !0), l(\"z\", 1, 52, 1, 48);var x,\n      g,\n      d,\n      b,\n      m,\n      w = function w(t) {\n    return s.getUniformLocation(h, t);\n  },\n      P = w(\"m\"),\n      z = w(\"x\"),\n      A = w(\"j\"),\n      j = 0,\n      E = function E() {\n    return d = t.clientHeight * o | 0, (t.width !== (g = t.clientWidth * o | 0) || t.height !== d) && (t.width = g, t.height = d, !0);\n  },\n      F = function F() {\n    j && (s.blendFunc(m ? 1 : a, m ? 0 : 771), s.depthFunc(m ? 513 : 515), s.bindTexture(3553, b.tex), s.uniform1i(z, b.tex), s.uniform1f(A, m ? b.atest : 0), s.bufferSubData(34962, 0, p.subarray(0, 13 * j)), c.drawElementsInstancedANGLE(4, 6, 5121, 0, j), j = 0);\n  },\n      S = function S(t) {\n    if (t.visible) {\n      65535 === j && F();var n = t.frame,\n          e = n.uvs,\n          i = t.anchor || n.anchor;b.tex !== n.tex && (b.tex && F(), b = n);var r = 13 * j;p[r++] = i.x, p[r++] = i.y, p[r++] = t.scale.x * n.size.x, p[r++] = t.scale.y * n.size.y, p[r++] = t.rotation, p[r++] = t.position.x, p[r++] = t.position.y, p[r++] = e[0], p[r++] = e[1], p[r++] = e[2], p[r++] = e[3], y[r++] = ((16777215 & t.tint) << 8 | 255 * t.alpha & 255) >>> 0, p[r++] = t.layer.z, j++;\n    }\n  },\n      D = new e(0),\n      O = [D],\n      L = { gl: s, camera: { at: i.Point(), to: i.Point(), angle: 0 }, background: function background(t, n, e, i) {\n      void 0 === i && (i = 1), s.clearColor(t, n, e, i);\n    }, layer: function layer(t) {\n      var n = O.find(function (n) {\n        return n.z === t;\n      });return n || (n = new e(t), O.push(n), O.sort(function (t, n) {\n        return n.z - t.z;\n      })), n;\n    }, add: function add(t) {\n      D.add(t);\n    }, resize: E, render: function render() {\n      E();var t = L.camera,\n          n = t.at,\n          e = t.to,\n          i = t.angle,\n          r = n.x - g * e.x,\n          a = n.y - d * e.y,\n          o = Math.cos(i),\n          c = Math.sin(i),\n          u = 2 / g,\n          f = -2 / d;x = [o * u, c * f, 0, 0, -c * u, o * f, 0, 0, 0, 0, -1e-5, 0, (n.x * (1 - o) + n.y * c) * u - 2 * r / g - 1, (n.y * (1 - o) - n.x * c) * f + 2 * a / d + 1, 0, 1], s.useProgram(h), s.enable(3042), s.enable(2929), s.uniformMatrix4fv(P, !1, x), s.viewport(0, 0, g, d), s.clear(16640), b = { tex: null }, m = !0, O.forEach(function (t) {\n        return t.o.i(function (t) {\n          return S(t);\n        });\n      }), F(), m = !1;for (var l = O.length - 1; l >= 0; l--) {\n        O[l].t.i(function (t) {\n          return S(t);\n        });\n      }F();\n    } };return E(), L;\n};i.Point = function () {\n  function t(t, n) {\n    if (!(this instanceof i.Point)) return new i.Point(t, n);this.set(t, n);\n  }return t.prototype.set = function (t, n) {\n    return this.x = t || 0, this.y = n || (0 !== n ? this.x : 0), this;\n  }, t.prototype.copy = function (t) {\n    return this.x = t.x, this.y = t.y, this;\n  }, t;\n}();var r = function t(n, e, r, a) {\n  if (!(this instanceof t)) return new t(n, e, r, a);this.size = i.Point().copy(r), this.anchor = i.Point().copy(a || n.anchor), this.uvs = [e.x / n.size.x, e.y / n.size.y, r.x / n.size.x, r.y / n.size.y], this.t = n;\n},\n    a = { atest: { configurable: !0 }, tex: { configurable: !0 } };a.atest.get = function () {\n  return this.t.atest;\n}, a.tex.get = function () {\n  return this.t.tex;\n}, Object.defineProperties(r.prototype, a);i.Frame = r, i.Texture = function t(n, e, r, a) {\n  if (!(this instanceof t)) return new t(n, e, r, a);this.size = i.Point(e.width, e.height), this.anchor = i.Point(), this.uvs = [0, 0, 1, 1], this.atest = r || (0 === r ? 0 : 1);var o = _extends({ 10240: 9728, 10241: 9728, 10242: 33071, 10243: 33071 }, a),\n      s = n.gl;this.tex = s.createTexture(), s.bindTexture(3553, this.tex), Object.keys(o).forEach(function (t) {\n    return s.texParameteri(3553, t, o[t]);\n  }), s.texImage2D(3553, 0, 6408, 6408, 5121, e);\n}, i.Sprite = function () {\n  function t(n, e) {\n    if (!(this instanceof t)) return new t(n, e);_extends(this, { frame: n, visible: !0, position: i.Point(), rotation: 0, anchor: null, scale: i.Point(1), tint: 16777215, a: 1 }, e), this.remove();\n  }var n = { alpha: { configurable: !0 } };return n.alpha.get = function () {\n    return this.a;\n  }, n.alpha.set = function (t) {\n    var n = this.a;this.a = t, this.n && (t < 1 && 1 === n || 1 === t && n < 1) && this.layer.add(this);\n  }, t.prototype.remove = function () {\n    this.n && this.n.r(), this.layer = null, this.n = null;\n  }, Object.defineProperties(t.prototype, n), t;\n}();exports.default = i;\n\n/***/ }),\n\n/***/ \"WUy4\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nexports.__esModule = true;\nexports.default = undefined;\n\nvar _preact = __webpack_require__(\"KM04\");\n\nvar _js13k2d = __webpack_require__(\"GBUi\");\n\nvar _js13k2d2 = _interopRequireDefault(_js13k2d);\n\nvar _style = __webpack_require__(\"a39o\");\n\nvar _style2 = _interopRequireDefault(_style);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint-disable new-cap */\n\n\nvar Point = _js13k2d2.default.Point,\n    Texture = _js13k2d2.default.Texture,\n    Frame = _js13k2d2.default.Frame,\n    Sprite = _js13k2d2.default.Sprite;\n\n\nvar tint = Math.random() * 0xffffff;\n\nvar atlasImg = function atlasImg() {\n\tvar canvas = document.createElement('canvas');\n\tvar size = 32;\n\tvar half = size / 2;\n\tcanvas.width = size;\n\tcanvas.height = size;\n\tvar ctx = canvas.getContext('2d');\n\n\tvar offset = 0;\n\n\tctx.lineWidth = size / 16;\n\tctx.fillStyle = '#cccccc';\n\tctx.strokeStyle = '#000000';\n\tctx.beginPath();\n\n\tctx.moveTo(offset + half, half);\n\tfor (var angle = 0; angle < Math.PI * 2; angle += Math.PI * 2 / 5) {\n\t\tctx.lineTo(offset + half - Math.sin(angle) * half * 0.9, half - Math.cos(angle) * half * 0.9);\n\t}\n\n\tctx.closePath();\n\tctx.fill();\n\tctx.stroke();\n\n\treturn canvas;\n};\n\nvar Bunny = function (_Sprite) {\n\t_inherits(Bunny, _Sprite);\n\n\tfunction Bunny(frame, props) {\n\t\t_classCallCheck(this, Bunny);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Sprite.call(this, frame, props));\n\n\t\t_this.gravity = 0.75;\n\t\t_this.speedX = Math.random() * 4;\n\t\t_this.speedY = Math.random() * 4 - 2;\n\t\treturn _this;\n\t}\n\n\tBunny.prototype.update = function update(bounds) {\n\t\tthis.position.x += this.speedX;\n\t\tthis.position.y += this.speedY;\n\t\tthis.speedY += this.gravity;\n\n\t\tif (this.position.x > bounds.right) {\n\t\t\tthis.speedX *= -1;\n\t\t\tthis.position.x = bounds.right;\n\t\t} else if (this.position.x < bounds.left) {\n\t\t\tthis.speedX *= -1;\n\t\t\tthis.position.x = bounds.left;\n\t\t}\n\n\t\tif (this.position.y > bounds.bottom) {\n\t\t\tthis.speedY *= -0.85;\n\t\t\tthis.position.y = bounds.bottom;\n\t\t\tif (Math.random() > 0.5) {\n\t\t\t\tthis.speedY -= Math.random() * 6;\n\t\t\t}\n\t\t} else if (this.position.y < bounds.top) {\n\t\t\tthis.speedY = 0;\n\t\t\tthis.position.y = bounds.top;\n\t\t}\n\t};\n\n\treturn Bunny;\n}(Sprite);\n\nvar _ref = (0, _preact.h)('canvas', { id: 'view' });\n\nvar Bunnymark = function (_Component) {\n\t_inherits(Bunnymark, _Component);\n\n\tfunction Bunnymark() {\n\t\tvar _temp, _this2, _ret;\n\n\t\t_classCallCheck(this, Bunnymark);\n\n\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\targs[_key] = arguments[_key];\n\t\t}\n\n\t\treturn _ret = (_temp = (_this2 = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this2), _this2.onmousedown = function (event) {\n\t\t\t_this2.add = true;\n\t\t\ttint = Math.random() * 0xffffff;\n\t\t\tevent.preventDefault();\n\t\t}, _this2.ontouchstart = function (event) {\n\t\t\t_this2.add = true;\n\t\t\ttint = Math.random() * 0xffffff;\n\t\t\tevent.preventDefault();\n\t\t}, _this2.onmouseup = function (event) {\n\t\t\t_this2.add = false;\n\t\t\tevent.preventDefault();\n\t\t}, _this2.ontouchend = function (event) {\n\t\t\t_this2.add = false;\n\t\t\tevent.preventDefault();\n\t\t}, _temp), _possibleConstructorReturn(_this2, _ret);\n\t}\n\n\tBunnymark.prototype.componentDidMount = function componentDidMount() {\n\t\tvar _Texture,\n\t\t    _this3 = this;\n\n\t\tvar view = document.getElementById('view');\n\n\t\tthis.add = false;\n\n\t\tvar scale = window.devicePixelRatio === 1 ? 1 : 2;\n\t\tvar scene = (0, _js13k2d2.default)(view, { scale: scale });\n\t\tvar gl = scene.gl;\n\n\n\t\tscene.background(1, 1, 1);\n\n\t\tvar atlas = Texture(scene, atlasImg(), 0.5, (_Texture = {}, _Texture[gl.TEXTURE_MAG_FILTER] = gl.LINEAR, _Texture[gl.TEXTURE_MIN_FILTER] = gl.LINEAR, _Texture));\n\t\tatlas.anchor = Point(0.5);\n\n\t\tvar frames = [Frame(atlas, Point(), Point(32))];\n\n\t\tvar len = 0;\n\t\tvar cl = 0;\n\t\tvar sprs = [];\n\n\t\tvar addSprite = function addSprite(a) {\n\t\t\tif (len % 250 === 0) {\n\t\t\t\tcl++;\n\t\t\t}\n\t\t\tlen += a;\n\n\t\t\tvar layer = scene.layer(cl);\n\n\t\t\tvar width = view.width;\n\n\n\t\t\tfor (var i = 0; i < a; i++) {\n\t\t\t\tvar sprite = new Bunny(frames[i % frames.length], {\n\t\t\t\t\tposition: Point(i % 2 * width, 0),\n\t\t\t\t\t// scale: Point(0.5),\n\t\t\t\t\ttint: tint\n\t\t\t\t});\n\n\t\t\t\tlayer.add(sprite);\n\t\t\t\tsprs.push(sprite);\n\t\t\t}\n\t\t};\n\n\t\tvar loop = function loop(delta) {\n\t\t\tscene.resize();\n\n\t\t\tif (len < 3000 || _this3.add) addSprite(25);\n\n\t\t\tvar bounds = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\tright: view.width,\n\t\t\t\tbottom: view.height\n\t\t\t};\n\n\t\t\tsprs.forEach(function (sprite) {\n\t\t\t\treturn sprite.update(bounds);\n\t\t\t});\n\n\t\t\tscene.render();\n\n\t\t\treturn [{\n\t\t\t\ttitle: 'sprites',\n\t\t\t\tvalue: len < 10000 ? len : Number((len / 1000).toFixed(1)) + 'k'\n\t\t\t}];\n\t\t};\n\n\t\tthis.props.start(loop);\n\t};\n\n\t/*\n                <h1>Home</h1>\n                <p>This is the Home component.</p>\n    */\n\n\tBunnymark.prototype.render = function render() {\n\t\treturn (0, _preact.h)(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\t'class': _style2.default.home,\n\t\t\t\tonMouseDown: this.onmousedown,\n\t\t\t\tonTouchStart: this.ontouchstart,\n\t\t\t\tonMouseUp: this.onmouseup,\n\t\t\t\tonTouchEnd: this.ontouchend\n\t\t\t},\n\t\t\t'Click or touch to add sprites',\n\t\t\t_ref\n\t\t);\n\t};\n\n\treturn Bunnymark;\n}(_preact.Component);\n\nexports.default = Bunnymark;\n\n/***/ }),\n\n/***/ \"a39o\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"home\":\"home__lijWV\"};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-bunnymark.chunk.b8af6.js","var t=function(t,n,e){this.l=t,this.c=n,this.n=e,this.p=null};t.prototype.r=function(){this.p?this.p.n=this.n:this.l.h=this.n,this.n&&(this.n.p=this.p)};var n=function(){this.h=null};n.prototype.add=function(n){var e=new t(this,n,this.h);return this.h&&(this.h.p=e),this.h=e,e},n.prototype.i=function(t){for(var n=this.h;n;)t(n.c),n=n.n};var e=function(t){this.z=t,this.o=new n,this.t=new n};e.prototype.add=function(t){t.remove(),t.layer=this,t.n=(function(t){return 1!==t.alpha||0===t.frame.atest}(t)?this.t:this.o).add(t)};var i=function(t,n){var r=Object.assign({antialias:!1,alpha:!1,scale:1},n),a=r.alpha?1:770,o=r.scale,s=t.getContext(\"webgl\",r),c=s.getExtension(\"ANGLE_instanced_arrays\"),u=function(t,n){var e=s.createShader(n);return s.shaderSource(e,t),s.compileShader(e),e},h=s.createProgram();s.attachShader(h,u(\"attribute vec2 g;\\nattribute vec2 a;\\nattribute vec2 t;\\nattribute float r;\\nattribute vec2 s;\\nattribute vec4 u;\\nattribute vec4 c;\\nattribute float z;\\nuniform mat4 m;\\nvarying vec2 v;\\nvarying vec4 i;\\nvoid main(){\\nv=u.xy+g*u.zw;\\ni=c.abgr;\\nvec2 p=(g-a)*s;\\nfloat q=cos(r);\\nfloat w=sin(r);\\np=vec2(p.x*q-p.y*w,p.x*w+p.y*q);\\np+=a+t;\\ngl_Position=m*vec4(p,z,1);}\",35633)),s.attachShader(h,u(\"precision mediump float;\\nuniform sampler2D x;\\nuniform float j;\\nvarying vec2 v;\\nvarying vec4 i;\\nvoid main(){\\nvec4 c=texture2D(x,v);\\ngl_FragColor=c*i;\\nif(j>0.0){\\nif(c.a<j)discard;\\ngl_FragColor.a=1.0;};}\",35632)),s.linkProgram(h);var f=function(t,n,e){var i=s.createBuffer();s.bindBuffer(t,i),s.bufferData(t,n,e||35044)},l=function(t,n,e,i,r,a,o){var u=s.getAttribLocation(h,t);s.enableVertexAttribArray(u),s.vertexAttribPointer(u,n,a||5126,!!o,e||0,r||0),i&&c.vertexAttribDivisorANGLE(u,i)};f(34963,new Uint8Array([0,1,2,2,1,3])),f(34962,new Float32Array([0,0,0,1,1,0,1,1])),l(\"g\",2);var v=new ArrayBuffer(3407820),p=new Float32Array(v),y=new Uint32Array(v);f(34962,v,35048),l(\"a\",2,52,1),l(\"s\",2,52,1,8),l(\"r\",1,52,1,16),l(\"t\",2,52,1,20),l(\"u\",4,52,1,28),l(\"c\",4,52,1,44,5121,!0),l(\"z\",1,52,1,48);var x,g,d,b,m,w=function(t){return s.getUniformLocation(h,t)},P=w(\"m\"),z=w(\"x\"),A=w(\"j\"),j=0,E=function(){return d=t.clientHeight*o|0,(t.width!==(g=t.clientWidth*o|0)||t.height!==d)&&(t.width=g,t.height=d,!0)},F=function(){j&&(s.blendFunc(m?1:a,m?0:771),s.depthFunc(m?513:515),s.bindTexture(3553,b.tex),s.uniform1i(z,b.tex),s.uniform1f(A,m?b.atest:0),s.bufferSubData(34962,0,p.subarray(0,13*j)),c.drawElementsInstancedANGLE(4,6,5121,0,j),j=0)},S=function(t){if(t.visible){65535===j&&F();var n=t.frame,e=n.uvs,i=t.anchor||n.anchor;b.tex!==n.tex&&(b.tex&&F(),b=n);var r=13*j;p[r++]=i.x,p[r++]=i.y,p[r++]=t.scale.x*n.size.x,p[r++]=t.scale.y*n.size.y,p[r++]=t.rotation,p[r++]=t.position.x,p[r++]=t.position.y,p[r++]=e[0],p[r++]=e[1],p[r++]=e[2],p[r++]=e[3],y[r++]=((16777215&t.tint)<<8|255*t.alpha&255)>>>0,p[r++]=t.layer.z,j++}},D=new e(0),O=[D],L={gl:s,camera:{at:i.Point(),to:i.Point(),angle:0},background:function(t,n,e,i){void 0===i&&(i=1),s.clearColor(t,n,e,i)},layer:function(t){var n=O.find(function(n){return n.z===t});return n||(n=new e(t),O.push(n),O.sort(function(t,n){return n.z-t.z})),n},add:function(t){D.add(t)},resize:E,render:function(){E();var t=L.camera,n=t.at,e=t.to,i=t.angle,r=n.x-g*e.x,a=n.y-d*e.y,o=Math.cos(i),c=Math.sin(i),u=2/g,f=-2/d;x=[o*u,c*f,0,0,-c*u,o*f,0,0,0,0,-1e-5,0,(n.x*(1-o)+n.y*c)*u-2*r/g-1,(n.y*(1-o)-n.x*c)*f+2*a/d+1,0,1],s.useProgram(h),s.enable(3042),s.enable(2929),s.uniformMatrix4fv(P,!1,x),s.viewport(0,0,g,d),s.clear(16640),b={tex:null},m=!0,O.forEach(function(t){return t.o.i(function(t){return S(t)})}),F(),m=!1;for(var l=O.length-1;l>=0;l--)O[l].t.i(function(t){return S(t)});F()}};return E(),L};i.Point=function(){function t(t,n){if(!(this instanceof i.Point))return new i.Point(t,n);this.set(t,n)}return t.prototype.set=function(t,n){return this.x=t||0,this.y=n||(0!==n?this.x:0),this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t}();var r=function t(n,e,r,a){if(!(this instanceof t))return new t(n,e,r,a);this.size=i.Point().copy(r),this.anchor=i.Point().copy(a||n.anchor),this.uvs=[e.x/n.size.x,e.y/n.size.y,r.x/n.size.x,r.y/n.size.y],this.t=n},a={atest:{configurable:!0},tex:{configurable:!0}};a.atest.get=function(){return this.t.atest},a.tex.get=function(){return this.t.tex},Object.defineProperties(r.prototype,a);i.Frame=r,i.Texture=function t(n,e,r,a){if(!(this instanceof t))return new t(n,e,r,a);this.size=i.Point(e.width,e.height),this.anchor=i.Point(),this.uvs=[0,0,1,1],this.atest=r||(0===r?0:1);var o=Object.assign({10240:9728,10241:9728,10242:33071,10243:33071},a),s=n.gl;this.tex=s.createTexture(),s.bindTexture(3553,this.tex),Object.keys(o).forEach(function(t){return s.texParameteri(3553,t,o[t])}),s.texImage2D(3553,0,6408,6408,5121,e)},i.Sprite=function(){function t(n,e){if(!(this instanceof t))return new t(n,e);Object.assign(this,{frame:n,visible:!0,position:i.Point(),rotation:0,anchor:null,scale:i.Point(1),tint:16777215,a:1},e),this.remove()}var n={alpha:{configurable:!0}};return n.alpha.get=function(){return this.a},n.alpha.set=function(t){var n=this.a;this.a=t,this.n&&(t<1&&1===n||1===t&&n<1)&&this.layer.add(this)},t.prototype.remove=function(){this.n&&this.n.r(),this.layer=null,this.n=null},Object.defineProperties(t.prototype,n),t}();export default i;\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/js13k-2d/dist/renderer.m.js","/* eslint-disable new-cap */\nimport { h, Component } from 'preact';\nimport Renderer from 'js13k-2d';\nimport style from './style';\n\nconst { Point, Texture, Frame, Sprite } = Renderer;\n\nlet tint = Math.random() * 0xffffff;\n\nconst atlasImg = () => {\n\tconst canvas = document.createElement('canvas');\n\tconst size = 32;\n\tconst half = size / 2;\n\tcanvas.width = size;\n\tcanvas.height = size;\n\tconst ctx = canvas.getContext('2d');\n\n\tlet offset = 0;\n\n\tctx.lineWidth = size / 16;\n\tctx.fillStyle = '#cccccc';\n\tctx.strokeStyle = '#000000';\n\tctx.beginPath();\n\n\tctx.moveTo(offset + half, half);\n\tfor (let angle = 0; angle < Math.PI * 2; angle += (Math.PI * 2) / 5) {\n\t\tctx.lineTo(\n\t\t\toffset + half - Math.sin(angle) * half * 0.9,\n\t\t\thalf - Math.cos(angle) * half * 0.9\n\t\t);\n\t}\n\n\tctx.closePath();\n\tctx.fill();\n\tctx.stroke();\n\n\treturn canvas;\n};\n\nclass Bunny extends Sprite {\n\tconstructor(frame, props) {\n\t\tsuper(frame, props);\n\n\t\tthis.gravity = 0.75;\n\t\tthis.speedX = Math.random() * 4;\n\t\tthis.speedY = Math.random() * 4 - 2;\n\t}\n\n\tupdate(bounds) {\n\t\tthis.position.x += this.speedX;\n\t\tthis.position.y += this.speedY;\n\t\tthis.speedY += this.gravity;\n\n\t\tif (this.position.x > bounds.right) {\n\t\t\tthis.speedX *= -1;\n\t\t\tthis.position.x = bounds.right;\n\t\t}\n\t\telse if (this.position.x < bounds.left) {\n\t\t\tthis.speedX *= -1;\n\t\t\tthis.position.x = bounds.left;\n\t\t}\n\n\t\tif (this.position.y > bounds.bottom) {\n\t\t\tthis.speedY *= -0.85;\n\t\t\tthis.position.y = bounds.bottom;\n\t\t\tif (Math.random() > 0.5) {\n\t\t\t\tthis.speedY -= Math.random() * 6;\n\t\t\t}\n\t\t}\n\t\telse if (this.position.y < bounds.top) {\n\t\t\tthis.speedY = 0;\n\t\t\tthis.position.y = bounds.top;\n\t\t}\n\t}\n}\n\nexport default class Bunnymark extends Component {\n\tonmousedown = event => {\n\t\tthis.add = true;\n\t\ttint = Math.random() * 0xffffff;\n\t\tevent.preventDefault();\n\t};\n\n\tontouchstart = event => {\n\t\tthis.add = true;\n\t\ttint = Math.random() * 0xffffff;\n\t\tevent.preventDefault();\n\t};\n\n\tonmouseup = event => {\n\t\tthis.add = false;\n\t\tevent.preventDefault();\n\t};\n\n\tontouchend = event => {\n\t\tthis.add = false;\n\t\tevent.preventDefault();\n\t};\n\n\tcomponentDidMount() {\n\t\tconst view = document.getElementById('view');\n\n\t\tthis.add = false;\n\n\t\tconst scale = window.devicePixelRatio === 1 ? 1 : 2;\n\t\tconst scene = Renderer(view, { scale });\n\t\tconst { gl } = scene;\n\n\t\tscene.background(1, 1, 1);\n\n\t\tconst atlas = Texture(scene, atlasImg(), 0.5, {\n\t\t\t[gl.TEXTURE_MAG_FILTER]: gl.LINEAR,\n\t\t\t[gl.TEXTURE_MIN_FILTER]: gl.LINEAR\n\t\t});\n\t\tatlas.anchor = Point(0.5);\n\n\t\tconst frames = [Frame(atlas, Point(), Point(32))];\n\n\t\tlet len = 0;\n\t\tlet cl = 0;\n\t\tconst sprs = [];\n\n\t\tconst addSprite = a => {\n\t\t\tif (len % 250 === 0) {\n\t\t\t\tcl++;\n\t\t\t}\n\t\t\tlen += a;\n\n\t\t\tconst layer = scene.layer(cl);\n\n\t\t\tconst { width } = view;\n\n\t\t\tfor (let i = 0; i < a; i++) {\n\t\t\t\tconst sprite = new Bunny(frames[i % frames.length], {\n\t\t\t\t\tposition: Point((i % 2) * width, 0),\n\t\t\t\t\t// scale: Point(0.5),\n\t\t\t\t\ttint\n\t\t\t\t});\n\n\t\t\t\tlayer.add(sprite);\n\t\t\t\tsprs.push(sprite);\n\t\t\t}\n\t\t};\n\n\t\tconst loop = delta => {\n\t\t\tscene.resize();\n\n\t\t\tif (len < 3000 || this.add) addSprite(25);\n\n\t\t\tconst bounds = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\tright: view.width,\n\t\t\t\tbottom: view.height\n\t\t\t};\n\n\t\t\tsprs.forEach(sprite => sprite.update(bounds));\n\n\t\t\tscene.render();\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttitle: 'sprites',\n\t\t\t\t\tvalue:\n\t\t\t\t\t\tlen < 10000\n\t\t\t\t\t\t\t? len\n\t\t\t\t\t\t\t: `${Number((len / 1000).toFixed(1))}k`\n\t\t\t\t}\n\t\t\t];\n\t\t};\n\n\t\tthis.props.start(loop);\n\t}\n\n\t/*\n                <h1>Home</h1>\n                <p>This is the Home component.</p>\n    */\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclass={style.home}\n\t\t\t\tonMouseDown={this.onmousedown}\n\t\t\t\tonTouchStart={this.ontouchstart}\n\t\t\t\tonMouseUp={this.onmouseup}\n\t\t\t\tonTouchEnd={this.ontouchend}\n\t\t\t>\n\t\t\t\tClick or touch to add sprites\n\t\t\t\t<canvas id=\"view\" />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./routes/bunnymark/index.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"home\":\"home__lijWV\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/bunnymark/style.css\n// module id = a39o\n// module chunks = 1"],"sourceRoot":""}